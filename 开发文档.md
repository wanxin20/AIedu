# AI智慧教育平台 - 开发文档

> 版本: v1.0.0  
> 更新时间: 2025-10-20  
> 项目类型: 教育管理系统（管理员 + 教师 + 学生）

---

## 📋 目录

- [1. 项目概述](#1-项目概述)
- [2. 技术栈](#2-技术栈)
- [3. 系统架构](#3-系统架构)
- [4. 功能模块清单](#4-功能模块清单)
- [5. 数据库设计](#5-数据库设计)
- [6. API 接口设计](#6-api-接口设计)
- [7. 前端页面清单](#7-前端页面清单)
- [8. 开发进度跟踪](#8-开发进度跟踪)
- [9. 部署说明](#9-部署说明)

---

## 1. 项目概述

### 1.1 项目简介
AI智慧教育平台是一个面向学校的教育管理系统，支持管理员、教师、学生三种角色，提供教学资源管理、作业管理、学习辅助等核心功能。

### 1.2 系统角色
- **管理员（Admin）**: 负责系统管理、用户管理、班级管理、安全配置、日志监控
- **教师（Teacher）**: 负责教学资源、作业管理、教案生成、学生管理
- **学生（Student）**: 负责作业提交、学习资源查看、学习辅助

### 1.3 核心特性
- ✅ 基于角色的权限控制（RBAC）
- ✅ JWT 身份认证
- ✅ AI 智能批改作业（集成 Coze API）
- ✅ AI 教案生成辅助
- ✅ 实时数据统计与可视化
- ✅ 完整的操作日志系统
- ✅ 文件上传与管理

---

## 2. 技术栈

### 2.1 前端技术栈
```
核心框架: React 18.3.1
语言: TypeScript 5.7.2
构建工具: Vite 6.2.0
路由: React Router DOM 7.3.0
样式: Tailwind CSS 3.4.17
状态管理: React Context API
UI 组件: 自定义组件库
动画: Framer Motion 12.9.2
图表: Recharts 2.15.1
Markdown: react-markdown 10.1.0
通知: Sonner 2.0.2
```

### 2.2 后端技术栈（待开发）
```
: Node.js + Express
  - 框架: Express.js 4.x
  - ORM: Sequelize / Prisma
  - 认证: JWT (jsonwebtoken)
  - 验证: express-validator
  - 文件上传: multer
  - 日志: winston / morgan

```

### 2.3 数据库
```
关系数据库: MySQL 8.0+
缓存: Redis 7.0+
文件存储: 本地存储 / 阿里云 OSS / 七牛云
```

### 2.4 第三方服务
```
AI 服务: Coze API (作业批改、教案生成、学习助手)
短信服务: 阿里云短信 / 腾讯云短信（可选）
```

---

## 3. 系统架构

### 3.1 前端架构
```
src/
├── components/          # 通用组件
│   └── Empty.tsx       # 空状态组件
├── contexts/           # Context 上下文
│   └── authContext.ts  # 认证上下文
├── hooks/              # 自定义 Hooks
│   └── useTheme.ts     # 主题 Hook
├── lib/                # 工具库
│   └── utils.ts        # 工具函数
├── pages/              # 页面组件
│   ├── Admin/          # 管理员页面
│   ├── Teacher/        # 教师页面
│   ├── Student/        # 学生页面
│   └── Login/          # 登录注册页面
├── services/           # API 服务
│   ├── gradingApi.ts   # 批改 API
│   ├── lessonPlanApi.ts # 教案 API
│   └── learningAssistantApi.ts # 学习助手 API
├── App.tsx             # 主应用
└── main.tsx            # 入口文件
```

### 3.2 后端架构（推荐 Node.js）
```
backend/
├── src/
│   ├── config/         # 配置文件
│   │   ├── database.js # 数据库配置
│   │   ├── redis.js    # Redis 配置
│   │   └── jwt.js      # JWT 配置
│   ├── middleware/     # 中间件
│   │   ├── auth.js     # 认证中间件
│   │   ├── rbac.js     # 权限中间件
│   │   └── logger.js   # 日志中间件
│   ├── models/         # 数据模型
│   │   ├── User.js     # 用户模型
│   │   ├── Class.js    # 班级模型
│   │   ├── Assignment.js # 作业模型
│   │   ├── Resource.js # 资源模型
│   │   └── Log.js      # 日志模型
│   ├── controllers/    # 控制器
│   │   ├── authController.js    # 认证控制器
│   │   ├── userController.js    # 用户控制器
│   │   ├── classController.js   # 班级控制器
│   │   ├── assignmentController.js # 作业控制器
│   │   ├── resourceController.js   # 资源控制器
│   │   └── logController.js        # 日志控制器
│   ├── routes/         # 路由
│   │   ├── auth.js     # 认证路由
│   │   ├── users.js    # 用户路由
│   │   ├── classes.js  # 班级路由
│   │   ├── assignments.js # 作业路由
│   │   ├── resources.js   # 资源路由
│   │   └── logs.js        # 日志路由
│   ├── services/       # 业务服务
│   │   ├── authService.js # 认证服务
│   │   ├── smsService.js  # 短信服务
│   │   ├── uploadService.js # 上传服务
│   │   └── cozeService.js   # Coze API 服务
│   ├── utils/          # 工具函数
│   │   ├── jwt.js      # JWT 工具
│   │   ├── validator.js # 验证工具
│   │   └── logger.js    # 日志工具
│   └── app.js          # Express 应用
├── uploads/            # 文件上传目录
├── logs/               # 日志目录
├── package.json
└── .env                # 环境变量
```

---

## 4. 功能模块清单

### 4.1 基础框架模块

| 功能模块 | 功能点 | 前端状态 | 后端状态 | 优先级 |
|---------|--------|---------|---------|--------|
| **用户认证** | 手机号登录 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 短信验证码 | ⏳ 前端Mock | ⏳ 待开发 | P0 |
| | 密码登录 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 忘记密码 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 教师注册 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 学生注册 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 登出功能 | ✅ 完成 | ⏳ 待开发 | P0 |
| **权限管理** | JWT Token 管理 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 角色权限验证 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 路由保护 | ✅ 完成 | N/A | P0 |
| | Token 刷新机制 | ⏳ 待开发 | ⏳ 待开发 | P1 |
| **用户管理** | 用户列表查询 | ⏳ 待开发 | ⏳ 待开发 | P0 |
| | 用户详情查看 | ⏳ 待开发 | ⏳ 待开发 | P1 |
| | 用户信息编辑 | ⏳ 待开发 | ⏳ 待开发 | P1 |
| | 用户状态管理 | ⏳ 待开发 | ⏳ 待开发 | P1 |
| | 批量操作 | ⏳ 待开发 | ⏳ 待开发 | P2 |

### 4.2 管理员功能模块

| 功能模块 | 功能点 | 前端状态 | 后端状态 | 优先级 |
|---------|--------|---------|---------|--------|
| **仪表盘** | 用户数统计 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 班级数统计 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 作业数统计 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 资源数统计 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 活跃度趋势图 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 存储使用监控 | ✅ 完成（Mock） | ⏳ 待开发 | P2 |
| **班级管理** | 班级列表 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 创建班级 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 编辑班级 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 删除班级 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 班级状态管理 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 学生列表查看 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 搜索和筛选 | ✅ 完成 | ⏳ 待开发 | P1 |
| **安全管理** | 密码策略配置 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 登录失败限制 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 会话超时设置 | ✅ 完成 | ⏳ 待开发 | P2 |
| | 批量密码重置 | ✅ 完成 | ⏳ 待开发 | P2 |
| **操作日志** | 日志列表查询 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 日志详情查看 | ✅ 完成 | ⏳ 待开发 | P1 |
| | IP地址追踪 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 日志筛选 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 日志导出 | ✅ 完成 | ⏳ 待开发 | P2 |

### 4.3 教师功能模块

| 功能模块 | 功能点 | 前端状态 | 后端状态 | 优先级 |
|---------|--------|---------|---------|--------|
| **教师仪表盘** | 班级概览 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 作业统计 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 待批改提醒 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 快捷入口 | ✅ 完成 | N/A | P1 |
| **资源管理** | 资源列表 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 文件上传 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 文件下载 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 资源分类 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 搜索和筛选 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 资源删除 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 预览功能 | ⏳ 待开发 | ⏳ 待开发 | P2 |
| **作业管理** | 作业列表 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 创建作业 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 编辑作业 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 删除作业 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 作业发布 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 完成情况跟踪 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | AI智能批改 | ✅ 完成（已接入Coze） | N/A | P0 |
| | 手动打分 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 批改评语 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 进度可视化 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 统计分析 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| **教案管理** | 教案列表 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | AI教案生成 | ✅ 完成（已接入Coze） | N/A | P1 |
| | 教案编辑 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 教案删除 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 导出PPT | ⏳ 待开发 | ⏳ 待开发 | P2 |
| | 模板管理 | ⏳ 待开发 | ⏳ 待开发 | P2 |

### 4.4 学生功能模块

| 功能模块 | 功能点 | 前端状态 | 后端状态 | 优先级 |
|---------|--------|---------|---------|--------|
| **学生仪表盘** | 待完成作业 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 学习进度 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 成绩概览 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 个性化推荐 | ⏳ 待开发 | ⏳ 待开发 | P2 |
| **作业提交** | 作业列表 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 作业详情 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 在线提交 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 图片上传 | ✅ 完成 | ⏳ 待开发 | P0 |
| | 提交状态跟踪 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 成绩查询 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| | 批改反馈查看 | ✅ 完成（Mock） | ⏳ 待开发 | P0 |
| **学习资源** | 资源浏览 | ✅ 完成（Mock） | ⏳ 待开发 | P1 |
| | 资源下载 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 资源搜索 | ✅ 完成 | ⏳ 待开发 | P1 |
| | 分类筛选 | ✅ 完成 | ⏳ 待开发 | P1 |
| **学习助手** | AI对话功能 | ✅ 完成（已接入Coze） | N/A | P1 |
| | 问题解答 | ✅ 完成（已接入Coze） | N/A | P1 |
| | 学习建议 | ✅ 完成（已接入Coze） | N/A | P2 |
| | 历史记录 | ⏳ 待开发 | ⏳ 待开发 | P2 |

### 4.5 优先级说明
- **P0**: 核心功能，必须立即开发
- **P1**: 重要功能，第一版本必须包含
- **P2**: 辅助功能，可以在后续版本迭代

---

## 5. 数据库设计

### 5.1 用户表（users）
```sql
CREATE TABLE users (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
  phone VARCHAR(11) NOT NULL UNIQUE COMMENT '手机号',
  password VARCHAR(255) NOT NULL COMMENT '密码（加密）',
  name VARCHAR(50) NOT NULL COMMENT '姓名',
  role ENUM('admin', 'teacher', 'student') NOT NULL COMMENT '角色',
  avatar VARCHAR(255) DEFAULT NULL COMMENT '头像URL',
  email VARCHAR(100) DEFAULT NULL COMMENT '邮箱',
  status TINYINT DEFAULT 1 COMMENT '状态: 0-禁用, 1-正常',
  class_id BIGINT DEFAULT NULL COMMENT '班级ID（学生）',
  subject VARCHAR(50) DEFAULT NULL COMMENT '任教学科（教师）',
  last_login_at DATETIME DEFAULT NULL COMMENT '最后登录时间',
  last_login_ip VARCHAR(50) DEFAULT NULL COMMENT '最后登录IP',
  failed_login_count INT DEFAULT 0 COMMENT '登录失败次数',
  locked_until DATETIME DEFAULT NULL COMMENT '锁定截止时间',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  deleted_at DATETIME DEFAULT NULL COMMENT '删除时间（软删除）',
  INDEX idx_phone (phone),
  INDEX idx_role (role),
  INDEX idx_class_id (class_id),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='用户表';
```

### 5.2 班级表（classes）
```sql
CREATE TABLE classes (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '班级ID',
  name VARCHAR(100) NOT NULL COMMENT '班级名称',
  grade VARCHAR(50) NOT NULL COMMENT '年级',
  teacher_id BIGINT DEFAULT NULL COMMENT '班主任ID',
  student_count INT DEFAULT 0 COMMENT '学生人数',
  status TINYINT DEFAULT 1 COMMENT '状态: 0-停用, 1-正常',
  description TEXT DEFAULT NULL COMMENT '班级描述',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  deleted_at DATETIME DEFAULT NULL COMMENT '删除时间（软删除）',
  INDEX idx_teacher_id (teacher_id),
  INDEX idx_grade (grade),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='班级表';
```

### 5.3 作业表（assignments）
```sql
CREATE TABLE assignments (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '作业ID',
  title VARCHAR(200) NOT NULL COMMENT '作业标题',
  description TEXT DEFAULT NULL COMMENT '作业描述',
  subject VARCHAR(50) NOT NULL COMMENT '学科',
  teacher_id BIGINT NOT NULL COMMENT '教师ID',
  class_id BIGINT NOT NULL COMMENT '班级ID',
  deadline DATETIME NOT NULL COMMENT '截止时间',
  total_score INT DEFAULT 100 COMMENT '总分',
  attachments JSON DEFAULT NULL COMMENT '附件列表',
  status ENUM('draft', 'published', 'closed') DEFAULT 'draft' COMMENT '状态',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  deleted_at DATETIME DEFAULT NULL COMMENT '删除时间（软删除）',
  INDEX idx_teacher_id (teacher_id),
  INDEX idx_class_id (class_id),
  INDEX idx_subject (subject),
  INDEX idx_status (status),
  INDEX idx_deadline (deadline)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='作业表';
```

### 5.4 作业提交表（submissions）
```sql
CREATE TABLE submissions (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '提交ID',
  assignment_id BIGINT NOT NULL COMMENT '作业ID',
  student_id BIGINT NOT NULL COMMENT '学生ID',
  content TEXT DEFAULT NULL COMMENT '提交内容',
  attachments JSON DEFAULT NULL COMMENT '附件列表（图片/文件）',
  score INT DEFAULT NULL COMMENT '得分',
  comment TEXT DEFAULT NULL COMMENT '批改评语',
  status ENUM('pending', 'submitted', 'graded') DEFAULT 'pending' COMMENT '状态',
  submitted_at DATETIME DEFAULT NULL COMMENT '提交时间',
  graded_at DATETIME DEFAULT NULL COMMENT '批改时间',
  graded_by BIGINT DEFAULT NULL COMMENT '批改人ID',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  INDEX idx_assignment_id (assignment_id),
  INDEX idx_student_id (student_id),
  INDEX idx_status (status),
  UNIQUE KEY uk_assignment_student (assignment_id, student_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='作业提交表';
```

### 5.5 教学资源表（resources）
```sql
CREATE TABLE resources (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '资源ID',
  title VARCHAR(200) NOT NULL COMMENT '资源标题',
  description TEXT DEFAULT NULL COMMENT '资源描述',
  type ENUM('document', 'video', 'audio', 'image', 'other') NOT NULL COMMENT '资源类型',
  category VARCHAR(50) NOT NULL COMMENT '分类',
  subject VARCHAR(50) NOT NULL COMMENT '学科',
  file_name VARCHAR(255) NOT NULL COMMENT '文件名',
  file_url VARCHAR(500) NOT NULL COMMENT '文件URL',
  file_size BIGINT DEFAULT 0 COMMENT '文件大小（字节）',
  mime_type VARCHAR(100) DEFAULT NULL COMMENT 'MIME类型',
  uploader_id BIGINT NOT NULL COMMENT '上传者ID',
  download_count INT DEFAULT 0 COMMENT '下载次数',
  view_count INT DEFAULT 0 COMMENT '查看次数',
  status TINYINT DEFAULT 1 COMMENT '状态: 0-隐藏, 1-正常',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  deleted_at DATETIME DEFAULT NULL COMMENT '删除时间（软删除）',
  INDEX idx_uploader_id (uploader_id),
  INDEX idx_category (category),
  INDEX idx_subject (subject),
  INDEX idx_type (type),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='教学资源表';
```

### 5.6 教案表（lesson_plans）
```sql
CREATE TABLE lesson_plans (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '教案ID',
  title VARCHAR(200) NOT NULL COMMENT '教案标题',
  subject VARCHAR(50) NOT NULL COMMENT '学科',
  grade VARCHAR(50) NOT NULL COMMENT '年级',
  teacher_id BIGINT NOT NULL COMMENT '教师ID',
  content LONGTEXT NOT NULL COMMENT '教案内容',
  objectives TEXT DEFAULT NULL COMMENT '教学目标',
  materials TEXT DEFAULT NULL COMMENT '教学材料',
  duration INT DEFAULT 45 COMMENT '课时（分钟）',
  tags JSON DEFAULT NULL COMMENT '标签',
  status ENUM('draft', 'published') DEFAULT 'draft' COMMENT '状态',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  deleted_at DATETIME DEFAULT NULL COMMENT '删除时间（软删除）',
  INDEX idx_teacher_id (teacher_id),
  INDEX idx_subject (subject),
  INDEX idx_grade (grade),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='教案表';
```

### 5.7 操作日志表（logs）
```sql
CREATE TABLE logs (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '日志ID',
  user_id BIGINT DEFAULT NULL COMMENT '用户ID',
  action VARCHAR(100) NOT NULL COMMENT '操作类型',
  module VARCHAR(50) NOT NULL COMMENT '模块',
  description TEXT DEFAULT NULL COMMENT '操作描述',
  ip_address VARCHAR(50) DEFAULT NULL COMMENT 'IP地址',
  user_agent TEXT DEFAULT NULL COMMENT 'User Agent',
  request_data JSON DEFAULT NULL COMMENT '请求数据',
  response_status INT DEFAULT NULL COMMENT '响应状态码',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  INDEX idx_user_id (user_id),
  INDEX idx_action (action),
  INDEX idx_module (module),
  INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='操作日志表';
```

### 5.8 系统配置表（system_configs）
```sql
CREATE TABLE system_configs (
  id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '配置ID',
  config_key VARCHAR(100) NOT NULL UNIQUE COMMENT '配置键',
  config_value TEXT NOT NULL COMMENT '配置值',
  description VARCHAR(255) DEFAULT NULL COMMENT '配置描述',
  type VARCHAR(50) DEFAULT 'string' COMMENT '值类型: string, number, boolean, json',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  INDEX idx_config_key (config_key)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='系统配置表';

-- 初始化系统配置
INSERT INTO system_configs (config_key, config_value, description, type) VALUES
('password_min_length', '8', '密码最小长度', 'number'),
('password_require_uppercase', 'true', '密码需要大写字母', 'boolean'),
('password_require_lowercase', 'true', '密码需要小写字母', 'boolean'),
('password_require_number', 'true', '密码需要数字', 'boolean'),
('password_require_special', 'false', '密码需要特殊字符', 'boolean'),
('max_login_attempts', '5', '最大登录失败次数', 'number'),
('login_lock_duration', '30', '登录锁定时长（分钟）', 'number'),
('session_timeout', '7200', '会话超时时间（秒）', 'number'),
('max_file_size', '10485760', '最大文件上传大小（字节，默认10MB）', 'number');
```

### 5.9 数据库关系图
```
users (用户表)
  ├─→ classes (班级表) [teacher_id]
  ├─→ assignments (作业表) [teacher_id]
  ├─→ submissions (作业提交表) [student_id, graded_by]
  ├─→ resources (教学资源表) [uploader_id]
  ├─→ lesson_plans (教案表) [teacher_id]
  └─→ logs (操作日志表) [user_id]

classes (班级表)
  ├─→ users (用户表) [teacher_id 反向]
  └─→ assignments (作业表) [class_id]

assignments (作业表)
  ├─→ users (用户表) [teacher_id 反向]
  ├─→ classes (班级表) [class_id 反向]
  └─→ submissions (作业提交表) [assignment_id]
```

---

## 6. API 接口设计

### 6.1 认证接口

#### 6.1.1 发送验证码
```
POST /api/auth/send-code
Content-Type: application/json

Request:
{
  "phone": "13800138000"
}

Response:
{
  "code": 200,
  "message": "验证码已发送",
  "data": {
    "expiresIn": 300  // 有效期（秒）
  }
}
```

#### 6.1.2 手机号登录
```
POST /api/auth/login/phone
Content-Type: application/json

Request:
{
  "phone": "13800138000",
  "code": "123456"
}

Response:
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 7200,
    "user": {
      "id": 1,
      "phone": "13800138000",
      "name": "张老师",
      "role": "teacher",
      "avatar": "https://example.com/avatar.jpg"
    }
  }
}
```

#### 6.1.3 密码登录
```
POST /api/auth/login/password
Content-Type: application/json

Request:
{
  "phone": "13800138000",
  "password": "Password123"
}

Response: 同手机号登录
```

#### 6.1.4 注册
```
POST /api/auth/register
Content-Type: application/json

Request:
{
  "phone": "13800138000",
  "password": "Password123",
  "name": "张三",
  "role": "student",  // 或 "teacher"
  "classId": 1,       // 学生必填
  "subject": "数学"   // 教师必填
}

Response:
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "token": "...",
    "user": { ... }
  }
}
```

#### 6.1.5 刷新Token
```
POST /api/auth/refresh
Authorization: Bearer {refreshToken}

Response:
{
  "code": 200,
  "message": "刷新成功",
  "data": {
    "token": "...",
    "expiresIn": 7200
  }
}
```

#### 6.1.6 登出
```
POST /api/auth/logout
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "登出成功"
}
```

### 6.2 用户管理接口

#### 6.2.1 获取用户列表
```
GET /api/users?page=1&pageSize=20&role=teacher&keyword=张
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 100,
    "page": 1,
    "pageSize": 20,
    "items": [
      {
        "id": 1,
        "phone": "13800138000",
        "name": "张老师",
        "role": "teacher",
        "avatar": "...",
        "status": 1,
        "classId": 1,
        "className": "高一(1)班",
        "subject": "数学",
        "createdAt": "2024-01-01 10:00:00"
      }
    ]
  }
}
```

#### 6.2.2 获取用户详情
```
GET /api/users/:id
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "id": 1,
    "phone": "13800138000",
    "name": "张老师",
    "role": "teacher",
    "avatar": "...",
    "email": "zhang@example.com",
    "status": 1,
    "classId": 1,
    "subject": "数学",
    "lastLoginAt": "2024-10-20 10:00:00",
    "lastLoginIp": "192.168.1.1",
    "createdAt": "2024-01-01 10:00:00"
  }
}
```

#### 6.2.3 更新用户信息
```
PUT /api/users/:id
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "name": "张三",
  "email": "zhang@example.com",
  "avatar": "https://..."
}

Response:
{
  "code": 200,
  "message": "更新成功"
}
```

#### 6.2.4 修改密码
```
PUT /api/users/:id/password
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "oldPassword": "OldPassword123",
  "newPassword": "NewPassword456"
}

Response:
{
  "code": 200,
  "message": "密码修改成功"
}
```

#### 6.2.5 重置密码（管理员）
```
POST /api/users/:id/reset-password
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "newPassword": "DefaultPassword123"
}

Response:
{
  "code": 200,
  "message": "密码重置成功"
}
```

### 6.3 班级管理接口

#### 6.3.1 获取班级列表
```
GET /api/classes?page=1&pageSize=20&grade=高一&status=1
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 50,
    "page": 1,
    "pageSize": 20,
    "items": [
      {
        "id": 1,
        "name": "高一(1)班",
        "grade": "高一",
        "teacherId": 1,
        "teacherName": "张老师",
        "studentCount": 45,
        "status": 1,
        "createdAt": "2024-01-01 10:00:00"
      }
    ]
  }
}
```

#### 6.3.2 创建班级
```
POST /api/classes
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "name": "高一(1)班",
  "grade": "高一",
  "teacherId": 1,
  "description": "班级描述"
}

Response:
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1,
    "name": "高一(1)班",
    ...
  }
}
```

#### 6.3.3 更新班级
```
PUT /api/classes/:id
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "name": "高一(2)班",
  "status": 1
}

Response:
{
  "code": 200,
  "message": "更新成功"
}
```

#### 6.3.4 删除班级
```
DELETE /api/classes/:id
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "删除成功"
}
```

#### 6.3.5 获取班级学生列表
```
GET /api/classes/:id/students
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": [
    {
      "id": 1,
      "name": "张三",
      "phone": "13800138000",
      "avatar": "...",
      "status": 1
    }
  ]
}
```

### 6.4 作业管理接口

#### 6.4.1 获取作业列表
```
GET /api/assignments?page=1&pageSize=20&classId=1&status=published
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 30,
    "page": 1,
    "pageSize": 20,
    "items": [
      {
        "id": 1,
        "title": "第一章练习题",
        "subject": "数学",
        "teacherId": 1,
        "teacherName": "张老师",
        "classId": 1,
        "className": "高一(1)班",
        "deadline": "2024-10-25 23:59:59",
        "totalScore": 100,
        "status": "published",
        "submittedCount": 30,
        "totalCount": 45,
        "createdAt": "2024-10-20 10:00:00"
      }
    ]
  }
}
```

#### 6.4.2 创建作业
```
POST /api/assignments
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "title": "第一章练习题",
  "description": "请完成以下习题",
  "subject": "数学",
  "classId": 1,
  "deadline": "2024-10-25 23:59:59",
  "totalScore": 100,
  "attachments": [
    {
      "name": "题目.pdf",
      "url": "https://..."
    }
  ]
}

Response:
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1,
    ...
  }
}
```

#### 6.4.3 获取作业详情
```
GET /api/assignments/:id
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "id": 1,
    "title": "第一章练习题",
    "description": "请完成以下习题",
    "subject": "数学",
    "teacherId": 1,
    "teacherName": "张老师",
    "classId": 1,
    "className": "高一(1)班",
    "deadline": "2024-10-25 23:59:59",
    "totalScore": 100,
    "attachments": [...],
    "status": "published",
    "submittedCount": 30,
    "totalCount": 45,
    "createdAt": "2024-10-20 10:00:00"
  }
}
```

#### 6.4.4 更新作业
```
PUT /api/assignments/:id
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "title": "第一章练习题（修订版）",
  "deadline": "2024-10-26 23:59:59"
}

Response:
{
  "code": 200,
  "message": "更新成功"
}
```

#### 6.4.5 发布作业
```
POST /api/assignments/:id/publish
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "发布成功"
}
```

#### 6.4.6 获取作业提交列表
```
GET /api/assignments/:id/submissions
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": [
    {
      "id": 1,
      "assignmentId": 1,
      "studentId": 10,
      "studentName": "张三",
      "content": "...",
      "attachments": [...],
      "score": 85,
      "comment": "完成得不错",
      "status": "graded",
      "submittedAt": "2024-10-21 10:00:00",
      "gradedAt": "2024-10-22 09:00:00"
    }
  ]
}
```

### 6.5 作业提交接口（学生）

#### 6.5.1 提交作业
```
POST /api/submissions
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "assignmentId": 1,
  "content": "作业内容",
  "attachments": [
    {
      "name": "答案.jpg",
      "url": "https://..."
    }
  ]
}

Response:
{
  "code": 200,
  "message": "提交成功",
  "data": {
    "id": 1,
    ...
  }
}
```

#### 6.5.2 获取提交详情
```
GET /api/submissions/:id
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "id": 1,
    "assignmentId": 1,
    "assignmentTitle": "第一章练习题",
    "studentId": 10,
    "studentName": "张三",
    "content": "...",
    "attachments": [...],
    "score": 85,
    "comment": "完成得不错",
    "status": "graded",
    "submittedAt": "2024-10-21 10:00:00",
    "gradedAt": "2024-10-22 09:00:00"
  }
}
```

#### 6.5.3 批改作业（教师）
```
POST /api/submissions/:id/grade
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "score": 85,
  "comment": "完成得不错，注意细节"
}

Response:
{
  "code": 200,
  "message": "批改成功"
}
```

### 6.6 资源管理接口

#### 6.6.1 获取资源列表
```
GET /api/resources?page=1&pageSize=20&category=课件&subject=数学
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 100,
    "page": 1,
    "pageSize": 20,
    "items": [
      {
        "id": 1,
        "title": "第一章课件",
        "description": "...",
        "type": "document",
        "category": "课件",
        "subject": "数学",
        "fileName": "chapter1.pdf",
        "fileUrl": "https://...",
        "fileSize": 1024000,
        "uploaderId": 1,
        "uploaderName": "张老师",
        "downloadCount": 50,
        "createdAt": "2024-10-20 10:00:00"
      }
    ]
  }
}
```

#### 6.6.2 上传资源
```
POST /api/resources
Authorization: Bearer {token}
Content-Type: multipart/form-data

Request:
{
  "title": "第一章课件",
  "description": "...",
  "category": "课件",
  "subject": "数学",
  "file": <File>
}

Response:
{
  "code": 200,
  "message": "上传成功",
  "data": {
    "id": 1,
    "fileUrl": "https://...",
    ...
  }
}
```

#### 6.6.3 删除资源
```
DELETE /api/resources/:id
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "删除成功"
}
```

#### 6.6.4 下载资源
```
GET /api/resources/:id/download
Authorization: Bearer {token}

Response: 文件流
```

### 6.7 教案管理接口

#### 6.7.1 获取教案列表
```
GET /api/lesson-plans?page=1&pageSize=20&subject=数学
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 50,
    "page": 1,
    "pageSize": 20,
    "items": [
      {
        "id": 1,
        "title": "第一章：函数",
        "subject": "数学",
        "grade": "高一",
        "teacherId": 1,
        "teacherName": "张老师",
        "duration": 45,
        "status": "published",
        "createdAt": "2024-10-20 10:00:00"
      }
    ]
  }
}
```

#### 6.7.2 创建教案
```
POST /api/lesson-plans
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "title": "第一章：函数",
  "subject": "数学",
  "grade": "高一",
  "content": "# 教案内容...",
  "objectives": "教学目标...",
  "materials": "教学材料...",
  "duration": 45,
  "tags": ["函数", "基础"]
}

Response:
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1,
    ...
  }
}
```

#### 6.7.3 获取教案详情
```
GET /api/lesson-plans/:id
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "id": 1,
    "title": "第一章：函数",
    "subject": "数学",
    "grade": "高一",
    "teacherId": 1,
    "teacherName": "张老师",
    "content": "# 教案内容...",
    "objectives": "教学目标...",
    "materials": "教学材料...",
    "duration": 45,
    "tags": ["函数", "基础"],
    "status": "published",
    "createdAt": "2024-10-20 10:00:00"
  }
}
```

#### 6.7.4 更新教案
```
PUT /api/lesson-plans/:id
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "content": "# 更新后的教案内容...",
  "status": "published"
}

Response:
{
  "code": 200,
  "message": "更新成功"
}
```

### 6.8 日志管理接口

#### 6.8.1 获取操作日志列表
```
GET /api/logs?page=1&pageSize=20&action=login&userId=1
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 1000,
    "page": 1,
    "pageSize": 20,
    "items": [
      {
        "id": 1,
        "userId": 1,
        "userName": "张老师",
        "action": "login",
        "module": "auth",
        "description": "用户登录",
        "ipAddress": "192.168.1.1",
        "userAgent": "Mozilla/5.0...",
        "responseStatus": 200,
        "createdAt": "2024-10-20 10:00:00"
      }
    ]
  }
}
```

#### 6.8.2 导出日志
```
GET /api/logs/export?startDate=2024-10-01&endDate=2024-10-31
Authorization: Bearer {token}

Response: Excel 文件流
```

### 6.9 系统配置接口

#### 6.9.1 获取系统配置
```
GET /api/system-configs
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "passwordMinLength": 8,
    "passwordRequireUppercase": true,
    "passwordRequireLowercase": true,
    "passwordRequireNumber": true,
    "passwordRequireSpecial": false,
    "maxLoginAttempts": 5,
    "loginLockDuration": 30,
    "sessionTimeout": 7200,
    "maxFileSize": 10485760
  }
}
```

#### 6.9.2 更新系统配置
```
PUT /api/system-configs
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "passwordMinLength": 10,
  "maxLoginAttempts": 3
}

Response:
{
  "code": 200,
  "message": "更新成功"
}
```

### 6.10 文件上传接口

#### 6.10.1 上传文件
```
POST /api/upload
Authorization: Bearer {token}
Content-Type: multipart/form-data

Request:
{
  "file": <File>,
  "type": "assignment" | "resource" | "avatar"
}

Response:
{
  "code": 200,
  "message": "上传成功",
  "data": {
    "url": "https://example.com/uploads/xxx.jpg",
    "fileName": "xxx.jpg",
    "fileSize": 102400,
    "mimeType": "image/jpeg"
  }
}
```

### 6.11 统计数据接口

#### 6.11.1 管理员仪表盘数据
```
GET /api/statistics/admin-dashboard
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "userCount": {
      "total": 500,
      "admin": 5,
      "teacher": 50,
      "student": 445
    },
    "classCount": 15,
    "assignmentCount": 200,
    "resourceCount": 150,
    "activityTrend": [
      {
        "date": "2024-10-14",
        "登录次数": 120,
        "作业提交": 45
      },
      ...
    ],
    "storage": {
      "used": 2560000000,
      "total": 10737418240
    }
  }
}
```

#### 6.11.2 教师仪表盘数据
```
GET /api/statistics/teacher-dashboard
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "classCount": 2,
    "studentCount": 90,
    "assignmentCount": {
      "total": 20,
      "published": 15,
      "draft": 5
    },
    "pendingGrading": 12,
    "resourceCount": 30,
    "recentAssignments": [...]
  }
}
```

#### 6.11.3 学生仪表盘数据
```
GET /api/statistics/student-dashboard
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "assignmentCount": {
      "total": 15,
      "submitted": 10,
      "pending": 5
    },
    "averageScore": 85.5,
    "recentSubmissions": [...],
    "learningProgress": [
      {
        "subject": "数学",
        "progress": 75
      },
      ...
    ]
  }
}
```

---

## 7. 前端页面清单

### 7.1 登录注册模块
| 页面 | 路由 | 组件 | 状态 | 说明 |
|------|------|------|------|------|
| 角色选择 | /login | RoleSelect.tsx | ✅ 完成 | 选择登录角色 |
| 手机号登录 | /login/phone | PhoneLogin.tsx | ✅ 完成 | 手机号+验证码/密码登录 |
| 忘记密码 | /forgot-password | ForgotPassword.tsx | ✅ 完成 | 密码重置 |
| 教师注册-步骤1 | /register/teacher/step1 | TeacherRegisterStep1.tsx | ✅ 完成 | 基本信息 |
| 教师注册-步骤2 | /register/teacher/step2 | TeacherRegisterStep2.tsx | ✅ 完成 | 任教信息 |
| 学生注册-步骤1 | /register/student/step1 | StudentRegisterStep1.tsx | ✅ 完成 | 基本信息 |
| 学生注册-步骤2 | /register/student/step2 | StudentRegisterStep2.tsx | ✅ 完成 | 班级选择 |

### 7.2 管理员模块
| 页面 | 路由 | 组件 | 状态 | 说明 |
|------|------|------|------|------|
| 管理员仪表盘 | /admin/dashboard | Dashboard.tsx | ✅ 完成（Mock） | 数据统计 |
| 班级管理 | /admin/classes | ClassManagement.tsx | ✅ 完成（Mock） | 班级CRUD |
| 日志管理 | /admin/logs | LogsManagement.tsx | ✅ 完成（Mock） | 操作日志 |
| 安全管理 | /admin/security | SecurityManagement.tsx | ✅ 完成 | 安全配置 |

### 7.3 教师模块
| 页面 | 路由 | 组件 | 状态 | 说明 |
|------|------|------|------|------|
| 教师仪表盘 | /teacher/dashboard | Dashboard.tsx | ✅ 完成（Mock） | 概览数据 |
| 资源管理 | /teacher/resources | ResourcesManagement.tsx | ✅ 完成（Mock） | 资源CRUD |
| 教案管理 | /teacher/lesson-plans | LessonPlansManagement.tsx | ✅ 完成（Mock） | 教案列表 |
| 教案生成器 | /teacher/lesson-plan-generator | LessonPlanGenerator.tsx | ✅ 完成（Coze） | AI生成教案 |
| 作业管理 | /teacher/assignments | AssignmentsManagement.tsx | ✅ 完成（Mock） | 作业列表 |
| 创建作业 | /teacher/assignments/create | CreateAssignment.tsx | ✅ 完成 | 创建作业 |
| 作业详情 | /teacher/assignments/detail/:id | AssignmentDetail.tsx | ✅ 完成（Mock） | 作业详情 |
| 作业进度详情 | /teacher/assignments/progress/:id | AssignmentProgressDetail.tsx | ✅ 完成（Mock+Coze） | 批改作业 |

### 7.4 学生模块
| 页面 | 路由 | 组件 | 状态 | 说明 |
|------|------|------|------|------|
| 学生仪表盘 | /student/dashboard | Dashboard.tsx | ✅ 完成（Mock） | 学习概览 |
| 作业列表 | /student/assignments | StudentAssignments.tsx | ✅ 完成（Mock） | 作业列表 |
| 作业详情 | /student/assignments/detail/:id | StudentAssignmentDetail.tsx | ✅ 完成（Mock） | 查看详情 |
| 提交作业 | /student/assignments/submit/:id | StudentAssignmentSubmit.tsx | ✅ 完成 | 提交作业 |
| 学习资源 | /student/resources | StudentResources.tsx | ✅ 完成（Mock） | 浏览资源 |
| 学习助手 | /student/learning-assistant | StudentLearningAssistant.tsx | ✅ 完成（Coze） | AI学习助手 |

### 7.5 通用组件
| 组件 | 文件 | 状态 | 说明 |
|------|------|------|------|
| 空状态 | Empty.tsx | ✅ 完成 | 空数据展示 |
| 布局组件 | - | ⏳ 待开发 | 统一布局 |
| 导航栏 | - | ⏳ 待开发 | 顶部导航 |
| 侧边栏 | - | ⏳ 待开发 | 侧边菜单 |

---

## 8. 开发进度跟踪

### 8.1 第一阶段：基础框架（预计2周）

#### Week 1: 后端基础搭建
- [ ] **Day 1-2**: 项目初始化
  - [ ] 创建后端项目结构
  - [ ] 配置数据库连接（MySQL + Redis）
  - [ ] 配置环境变量
  - [ ] 创建基础中间件（错误处理、日志）
  
- [ ] **Day 3-4**: 数据库设计与初始化
  - [ ] 创建所有数据表
  - [ ] 创建数据模型（Models）
  - [ ] 初始化系统配置数据
  - [ ] 创建管理员账号
  
- [ ] **Day 5**: 认证系统
  - [ ] 实现 JWT 认证
  - [ ] 实现登录接口（密码登录）
  - [ ] 实现注册接口
  - [ ] 实现登出接口
  - [ ] 前后端联调测试

#### Week 2: 核心功能开发
- [ ] **Day 1-2**: 用户管理
  - [ ] 用户列表接口
  - [ ] 用户详情接口
  - [ ] 用户更新接口
  - [ ] 密码修改接口
  - [ ] 前后端联调
  
- [ ] **Day 3-4**: 班级管理
  - [ ] 班级 CRUD 接口
  - [ ] 班级学生列表接口
  - [ ] 前后端联调
  
- [ ] **Day 5**: 文件上传
  - [ ] 实现文件上传接口
  - [ ] 配置文件存储（本地/OSS）
  - [ ] 前后端联调

### 8.2 第二阶段：管理员功能（预计1.5周）

#### Week 3-4: 管理员模块
- [ ] **Day 1**: 仪表盘统计
  - [ ] 实现统计数据接口
  - [ ] 前后端联调
  
- [ ] **Day 2**: 操作日志系统
  - [ ] 实现日志记录中间件
  - [ ] 实现日志查询接口
  - [ ] 实现日志导出功能
  - [ ] 前后端联调
  
- [ ] **Day 3**: 安全管理
  - [ ] 实现系统配置接口
  - [ ] 实现密码策略验证
  - [ ] 实现登录失败限制
  - [ ] 实现批量密码重置
  - [ ] 前后端联调

### 8.3 第三阶段：教师功能（预计2周）

#### Week 5: 资源与教案
- [ ] **Day 1-2**: 资源管理
  - [ ] 资源 CRUD 接口
  - [ ] 资源分类和搜索
  - [ ] 资源下载统计
  - [ ] 前后端联调
  
- [ ] **Day 3-4**: 教案管理
  - [ ] 教案 CRUD 接口
  - [ ] 教案搜索和筛选
  - [ ] 前后端联调
  
- [ ] **Day 5**: 教师仪表盘
  - [ ] 教师统计数据接口
  - [ ] 前后端联调

#### Week 6: 作业管理
- [ ] **Day 1-2**: 作业基础功能
  - [ ] 作业 CRUD 接口
  - [ ] 作业发布功能
  - [ ] 作业列表查询
  - [ ] 前后端联调
  
- [ ] **Day 3-4**: 作业提交与批改
  - [ ] 作业提交接口
  - [ ] 提交列表查询
  - [ ] 批改功能接口
  - [ ] 前后端联调
  
- [ ] **Day 5**: 作业统计
  - [ ] 完成情况统计
  - [ ] 进度数据接口
  - [ ] 前后端联调

### 8.4 第四阶段：学生功能（预计1周）

#### Week 7: 学生模块
- [ ] **Day 1**: 学生仪表盘
  - [ ] 学生统计数据接口
  - [ ] 待办事项接口
  - [ ] 前后端联调
  
- [ ] **Day 2-3**: 学生作业功能
  - [ ] 学生作业列表接口
  - [ ] 作业详情接口
  - [ ] 作业提交接口
  - [ ] 成绩查询接口
  - [ ] 前后端联调
  
- [ ] **Day 4**: 学习资源
  - [ ] 学生资源浏览接口
  - [ ] 资源下载接口
  - [ ] 前后端联调
  
- [ ] **Day 5**: 缓冲与优化
  - [ ] Bug 修复
  - [ ] 性能优化

### 8.5 第五阶段：测试与优化（预计1周）

#### Week 8: 测试与部署
- [ ] **Day 1-2**: 功能测试
  - [ ] 管理员功能测试
  - [ ] 教师功能测试
  - [ ] 学生功能测试
  - [ ] Bug 修复
  
- [ ] **Day 3**: 性能优化
  - [ ] 数据库查询优化
  - [ ] 接口响应时间优化
  - [ ] Redis 缓存优化
  
- [ ] **Day 4**: 安全加固
  - [ ] SQL 注入防护
  - [ ] XSS 防护
  - [ ] CSRF 防护
  - [ ] 接口限流
  
- [ ] **Day 5**: 部署上线
  - [ ] 配置生产环境
  - [ ] 部署到服务器
  - [ ] 域名配置
  - [ ] HTTPS 配置
  - [ ] 监控配置

### 8.6 总体进度表

| 阶段 | 时间 | 状态 | 完成度 |
|------|------|------|--------|
| 第一阶段：基础框架 | Week 1-2 | ⏳ 进行中 | 10% |
| 第二阶段：管理员功能 | Week 3-4 | ⏳ 待开始 | 0% |
| 第三阶段：教师功能 | Week 5-6 | ⏳ 待开始 | 0% |
| 第四阶段：学生功能 | Week 7 | ⏳ 待开始 | 0% |
| 第五阶段：测试与优化 | Week 8 | ⏳ 待开始 | 0% |

**总体进度**: 10% （前端基础完成，后端待开发）

### 8.7 当前状态总结

#### ✅ 已完成
- 前端项目框架搭建
- 前端路由配置
- 前端权限控制（Context）
- 所有前端页面UI（使用 Mock 数据）
- Coze API 集成（作业批改、教案生成、学习助手）

#### 🚧 进行中
- 后端项目架构设计
- 数据库设计
- API 接口设计

#### ⏳ 待开始
- 后端项目搭建
- 所有后端接口开发
- 前后端联调
- 测试与部署

---

## 9. 部署说明

### 9.1 开发环境

#### 前端开发
```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm run dev

# 访问地址
http://localhost:3000
```

#### 后端开发（Node.js）
```bash
# 创建后端项目
mkdir backend && cd backend
npm init -y

# 安装依赖
npm install express mysql2 sequelize redis jsonwebtoken bcryptjs \
  express-validator multer cors dotenv winston morgan

# 安装开发依赖
npm install -D nodemon

# 启动开发服务器
npm run dev

# 访问地址
http://localhost:5000
```

### 9.2 生产环境部署

#### 前端部署
```bash
# 构建生产版本
pnpm run build

# 部署到 Nginx
# 将 dist/static 目录内容复制到 /var/www/html

# Nginx 配置
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### 后端部署（PM2）
```bash
# 安装 PM2
npm install -g pm2

# 启动应用
pm2 start src/app.js --name "aiedu-backend"

# 查看状态
pm2 status

# 查看日志
pm2 logs

# 设置开机自启
pm2 startup
pm2 save
```

#### 数据库部署
```bash
# 安装 MySQL
sudo apt-get install mysql-server

# 创建数据库
mysql -u root -p
CREATE DATABASE aiedu CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'aiedu'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON aiedu.* TO 'aiedu'@'localhost';
FLUSH PRIVILEGES;

# 导入表结构
mysql -u aiedu -p aiedu < database.sql

# 安装 Redis
sudo apt-get install redis-server
```

### 9.3 环境变量配置

#### 后端 .env 文件
```env
# 服务器配置
NODE_ENV=production
PORT=5000
HOST=0.0.0.0

# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_NAME=aiedu
DB_USER=aiedu
DB_PASSWORD=your_password

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# JWT 配置
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=7200
REFRESH_TOKEN_SECRET=your_refresh_token_secret_key
REFRESH_TOKEN_EXPIRES_IN=604800

# 文件上传配置
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760

# Coze API 配置
COZE_API_BASE_URL=https://api.coze.cn/v3/chat
COZE_API_TOKEN=your_coze_api_token
COZE_BOT_ID_GRADING=7559774554567000110
COZE_BOT_ID_LESSON=your_lesson_bot_id
COZE_BOT_ID_ASSISTANT=your_assistant_bot_id

# 短信服务配置（可选）
SMS_ACCESS_KEY=
SMS_SECRET_KEY=
SMS_SIGN_NAME=
SMS_TEMPLATE_CODE=

# 日志配置
LOG_LEVEL=info
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7
```

### 9.4 监控与备份

#### 日志监控
```bash
# 使用 PM2 监控
pm2 monit

# 日志文件位置
/var/log/aiedu/
```

#### 数据库备份
```bash
# 每日自动备份脚本
#!/bin/bash
DATE=$(date +%Y%m%d)
mysqldump -u aiedu -p'your_password' aiedu > /backup/aiedu_$DATE.sql
# 删除7天前的备份
find /backup -name "aiedu_*.sql" -mtime +7 -delete

# 添加到 crontab
0 2 * * * /path/to/backup.sh
```

---

## 10. 附录

### 10.1 技术文档链接
- [React 官方文档](https://react.dev/)
- [TypeScript 官方文档](https://www.typescriptlang.org/)
- [Express.js 文档](https://expressjs.com/)
- [Sequelize ORM 文档](https://sequelize.org/)
- [MySQL 文档](https://dev.mysql.com/doc/)
- [Redis 文档](https://redis.io/docs/)
- [JWT 介绍](https://jwt.io/)

### 10.2 开发规范

#### 代码规范
- 使用 ESLint + Prettier 格式化代码
- 遵循 Airbnb JavaScript Style Guide
- 使用 TypeScript 严格模式
- 提交前运行 lint 检查

#### Git 提交规范
```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式调整
refactor: 重构
test: 测试相关
chore: 构建/工具相关

示例：
feat: 实现用户登录接口
fix: 修复作业提交时间显示错误
docs: 更新API文档
```

#### API 设计规范
- RESTful API 设计
- 统一响应格式
- 使用 HTTP 状态码
- 接口版本控制（/api/v1）

### 10.3 常见问题

#### Q1: 如何切换数据源？
A: 修改后端配置文件，将 Mock 数据替换为数据库查询。

#### Q2: 如何扩展新的角色？
A: 在 users 表添加新角色，在路由中添加权限验证。

#### Q3: 如何优化文件上传性能？
A: 使用 OSS 云存储，配置 CDN 加速。

#### Q4: 如何处理大量并发？
A: 使用 Redis 缓存，增加服务器实例，配置负载均衡。

---

## 📝 更新日志

### v1.0.0 (2025-10-20)
- 创建开发文档
- 完成项目架构设计
- 完成数据库设计
- 完成 API 接口设计
- 前端基础功能完成（使用 Mock 数据）
- 集成 Coze API（作业批改、教案生成、学习助手）

---

## 👥 开发团队

- **项目负责人**: [Your Name]
- **前端开发**: [Your Name]
- **后端开发**: 待招募
- **测试**: 待招募

---

**文档维护**: 请在每次完成重要功能后更新此文档
**最后更新**: 2025-10-20

